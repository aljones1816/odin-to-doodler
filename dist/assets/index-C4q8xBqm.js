(function(){const D=document.createElement("link").relList;if(D&&D.supports&&D.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))f(u);new MutationObserver(u=>{for(const a of u)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&f(s)}).observe(document,{childList:!0,subtree:!0});function l(u){const a={};return u.integrity&&(a.integrity=u.integrity),u.referrerPolicy&&(a.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?a.credentials="include":u.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(u){if(u.ep)return;u.ep=!0;const a=l(u);fetch(u.href,a)}})();function C(y,D,l="",f="",u="",a=!1){function s(){return y}function d(){return D}function i(p){D=p}function e(){return l}function t(p){l=p}function o(){return f}function n(p){f=p}function r(p){u=p}function m(){return u}function c(){return a}function g(){a=!a}return{getId:s,getTitle:d,setTitle:i,getDescription:e,setDescription:t,getDueDate:o,setDueDate:n,getGroup:m,setGroup:r,getStatus:c,setStatus:g}}function N(y){function D(){return y}function l(f){y=f}return{getGroupName:D,setGroupName:l}}function S(){function y(e=""){const t=JSON.parse(localStorage.getItem("todos")),o=[];if(t){for(let n=0;n<t.length;n++)if(!e||e=="All Items"){const r=l(t[n]);r.getStatus()||o.push(r)}else if(e=="Completed"){const r=l(t[n]);r.getStatus()&&o.push(r)}else if(e=="Due Today"){const r=l(t[n]),c=r.getDueDate().split("-"),g=parseInt(c[0],10),p=parseInt(c[1],10)-1,I=parseInt(c[2],10),T=new Date(g,p,I);T.setHours(0,0,0,0);const _=new Date;_.setHours(0,0,0,0),T.getTime()==_.getTime()&&o.push(r)}else if(t[n].group==e){const r=l(t[n]);r.getStatus()||o.push(r)}}return o}function D(e){const t=JSON.parse(localStorage.getItem("todos"));let o;const n={id:e.getId(),title:e.getTitle(),description:e.getDescription(),dueDate:e.getDueDate(),group:e.getGroup(),status:e.getStatus()};t?(o=t,o.push(n)):o=[n],localStorage.setItem("todos",JSON.stringify(o))}function l(e){return C(e.id,e.title,e.description,e.dueDate,e.group,e.status)}function f(e){const t=JSON.parse(localStorage.getItem("todos")),o=t.findIndex(r=>r.id==e.getId()),n={id:e.getId(),title:e.getTitle(),description:e.getDescription(),dueDate:e.getDueDate(),group:e.getGroup(),status:e.getStatus()};o!==-1&&(t[o]=n,localStorage.setItem("todos",JSON.stringify(t)))}function u(e){const t=JSON.parse(localStorage.getItem("todos")),o=t.findIndex(n=>n.id==e);o!==-1&&(t.splice(o,1),localStorage.setItem("todos",JSON.stringify(t)))}function a(){const e=JSON.parse(localStorage.getItem("groups")),t=[];if(e)for(let o=0;o<e.length;o++){const n=s(e[o]);t.push(n)}return t}function s(e){return N(e.groupName)}function d(e){const t=JSON.parse(localStorage.getItem("groups"));let o;const n={groupName:e.getGroupName()};t&&t.find(r=>r.groupName==n.groupName)||n.groupName=="Completed"||n.groupName=="All Items"||(t?(o=t,o.push(n)):o=[n],localStorage.setItem("groups",JSON.stringify(o)))}function i(e){const t=JSON.parse(localStorage.getItem("groups")),o=t.findIndex(n=>n.groupName==e);o!==-1&&(t.splice(o,1),localStorage.setItem("groups",JSON.stringify(t)))}return{getToDos:y,setToDo:D,getGroups:a,setGroup:d,updateToDo:f,deleteToDo:u,deleteGroup:i}}const h=S();function G(){function y(s,d=""){const i=document.createElement("div");i.id=`todo-${s.getId()}`,i.className="todo-list__item";const e=document.createElement("input");e.type="checkbox",e.id=`todo${s.getId()}`,e.checked=s.getStatus(),e.addEventListener("change",m=>{s.setStatus(),h.updateToDo(s),d!=="Completed"&&t.classList.add("completed"),setTimeout(()=>{l(d)},300)});const t=document.createElement("label");t.htmlFor=`todo${s.getId()}`,t.className="todo-list__label",t.appendChild(document.createTextNode(`${s.getTitle()}`));const o=document.createElement("span");o.className="todo-list__group",o.appendChild(document.createTextNode(`${s.getGroup()}`));const n=document.createElement("button");n.type="button",n.className="todo-list__expand-btn",n.textContent="↓",n.addEventListener("click",m=>{m.stopPropagation(),n.textContent==="↓"?(n.textContent="↑",r.style.display="",t.style.display="none",e.style.display="none",o.style.display="none"):(n.textContent="↓",r.style.display="none",t.style.display="",e.style.display="",o.style.display="")});const r=D(s,d);return i.appendChild(e),i.appendChild(t),i.appendChild(o),i.appendChild(n),i.appendChild(r),i}function D(s,d=""){const i=document.createElement("form");i.className="todo-list__edit-form",i.style.display="none";const e=document.createElement("input");e.type="text",e.className="todo-list__input",e.value=s.getTitle();const t=document.createElement("input");t.type="text",t.className="todo-list__input",t.value=s.getDescription();const o=document.createElement("input");o.type="date",o.className="todo-list__input",o.value=s.getDueDate();const n=document.createElement("select");n.className="todo-list__input";const r=h.getGroups(),m=document.createElement("option");m.value="",m.text="No Group",n.appendChild(m),r.forEach(p=>{const I=document.createElement("option");I.value=p.getGroupName(),I.text=p.getGroupName(),n.appendChild(I)}),n.value=s.getGroup();const c=document.createElement("button");c.type="button",c.className="todo-list__button",c.textContent="Save",c.addEventListener("click",p=>{p.preventDefault();const I=C(s.getId(),e.value,t.value,o.value,n.value);h.updateToDo(I),l(d)});const g=document.createElement("button");return g.type="button",g.className="todo__delete-btn",g.textContent="Delete",g.addEventListener("click",p=>{p.preventDefault(),h.deleteToDo(s.getId()),l(d)}),i.appendChild(e),i.appendChild(t),i.appendChild(o),i.appendChild(n),i.appendChild(g),i.appendChild(c),i}function l(s=""){let d=document.getElementById("todo-list");d.innerHTML="";const i=document.createElement("h2");i.className="todo-list__title",i.appendChild(document.createTextNode(s||"All Items")),d.appendChild(i),h.getToDos(s).forEach(r=>{const m=y(r,s);d.appendChild(m)});const t=document.createElement("div");t.className="todo-list__footer";const o=document.createElement("input");o.className="todo-list__input",o.type="text",o.placeholder="Add new todo";const n=document.createElement("button");n.className="todo-list__button",n.type="button",n.textContent="Add",n.addEventListener("click",r=>{r.preventDefault;const m=o.value;if(m){const c=h.getToDos().length,g=C(c,m,"","",s,!1);h.setToDo(g),l(s)}}),t.appendChild(o),t.appendChild(n),d.appendChild(t)}function f(s){const d=s.getGroupName(),i=document.createElement("li");i.className="menu__item",i.appendChild(document.createTextNode(d)),i.addEventListener("click",t=>{t.preventDefault(),l(d)});const e=document.createElement("button");return e.type="button",e.className="menu__delete-btn",e.textContent="X",e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),h.getToDos(d).forEach(n=>{const r=C(n.getId(),n.getTitle(),n.getDescription(),n.getDueDate(),"",n.getStatus());h.updateToDo(r)}),h.deleteGroup(d),u(),l()}),s.getGroupName()!="Completed"&&s.getGroupName()!="All Items"&&s.getGroupName()!="Due Today"&&i.appendChild(e),i}function u(){const s=N("All Items"),d=N("Completed"),i=N("Due Today"),e=document.getElementById("menu");e.innerHTML="";const t=document.createElement("ul");t.id="menu__list",t.className="menu__list";const o=f(s);t.appendChild(o);const n=f(i);t.appendChild(n),h.getGroups().forEach(g=>{const p=f(g);t.appendChild(p)});const m=f(d);t.appendChild(m),e.appendChild(t);const c=document.createElement("button");c.type="button",c.id="menu__button",c.className="menu__button",c.textContent="New Group",c.addEventListener("click",g=>{g.preventDefault(),c.insertAdjacentElement("beforebegin",a()),c.remove()}),e.appendChild(c)}function a(){const s=document.createElement("div"),d=document.createElement("input");d.type="text",d.className="todo-list__input",d.placeholder="Add new group";const i=document.createElement("button");return i.type="button",i.className="todo-list__button",i.innerText="Add Group",i.addEventListener("click",e=>{e.preventDefault();const t=d.value;if(t){const o=N(t);h.setGroup(o),u(),l()}else u()}),s.appendChild(d),s.appendChild(i),s}return{renderToDosList:l,renderMenu:u}}const E=G();E.renderToDosList();E.renderMenu();
